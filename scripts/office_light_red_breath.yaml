---
office_light_red_breath:
  alias: Office Light Red Breath
  mode: single
  sequence:
    # Only proceed if light is on
    - condition: state
      entity_id: light.office
      state: "on"

    # Store current state
    - variables:
        # original_brightness: "{{ state_attr('light.office', 'brightness') }}"
        original_rgb: "{{ state_attr('light.office', 'rgb_color') }}"
        original_color_temp: "{{ state_attr('light.office', 'color_temp') }}"

    # Fade to red over 1.5 seconds
    - action: light.turn_on
      target:
        entity_id: light.office
      data:
        rgb_color: [255, 0, 0]
        # brightness: 255
        transition: 2

    # Wait for fade to complete + hold red briefly
    - delay:
        seconds: 2

    # Fade back to original state over 1.5 seconds
    - action: light.turn_on
      target:
        entity_id: light.office
      data:
        # brightness: "{{ original_brightness }}"
        rgb_color: "{{ original_rgb if original_rgb else [255, 255, 255] }}"
        transition: 2

    # Wait for fade to complete + hold red briefly
    - delay:
        seconds: 2

    # Fade to red over 1.5 seconds
    - action: light.turn_on
      target:
        entity_id: light.office
      data:
        rgb_color: [255, 0, 0]
        # brightness: 255
        transition: 2

    # Wait for fade to complete + hold red briefly
    - delay:
        seconds: 2

    # Fade back to original state over 1.5 seconds
    - action: light.turn_on
      target:
        entity_id: light.office
      data:
        # brightness: "{{ original_brightness }}"
        rgb_color: "{{ original_rgb if original_rgb else [255, 255, 255] }}"
        transition: 2
